---
import type { ImageMetadata } from "astro";
import { Picture }  from "astro:assets";
import HeaderDestination from "./HeaderDestination.astro";
import { destinations } from "../data.json";
import moon from "../assets/destination/image-moon.png";

const { destinationName } = Astro.props;
const [destination] = destinations.filter(
  (destination) => destination.name === destinationName
);
// console.log(destination);

const images = import.meta.glob<{ default: ImageMetadata }>(
  "../assets/destination/*.{png,webp}"
);
// console.log(images);
---

<style>
  .destination__heading {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    color: var(--white);
  }

  .destination-span {
    opacity: 0.25;
  }

  /* TODO: check padding */
  .destination__image-container {
    padding: 3rem 0 2.5rem;
  }

  .destination__image {
    margin: 0 auto;
    width: 17rem;
    height: 17rem;
    object-fit: cover;
  }

  .destination__content {
    padding: 0 2.4rem;
  }

  .destintation__introduction {
    /* Check padding */
    padding: 2rem 0;
  }

  .destination__destintation,
  .destination__text {
    text-align: center;
  }

  .metrics {
    /* Check padding */
    padding: 2rem 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
  }

  .metrics__container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .metrics__heading,
  .metrics__metric {
    text-align: center;
  }

  .metrics__metric {
    /* Check style */
    font-size: 2.4rem;
    font-family: var(--bellafair-font);
    text-transform: uppercase;
    font-weight: 400;
    color: var(--white);
  }
</style>

<section class="destination">
  <h5 class="destination__heading">
    <span class="destination-span">01</span>Pick your destination
  </h5>

  <!-- TODO: images .png .webp in .destination__image -->
  <div class="destination__info">
    <div class="destination__image-container">
      <img class="destination__image" src={moon.src} alt={destination.name} />
      <!-- <Picture
        src={images[destination.images.png]()}
        formats={['webp', 'png']}
        alt={destination.name}
        class="destination__image"
      /> -->
    </div>

    <div class="destination__content">
      <HeaderDestination />

      <!-- Has own padding -->
      <div class="destintation__introduction">
        <h2 class="destination__destintation">{destination.name}</h2>
        <p class="destination__text">{destination.description}</p>
      </div>

      <!-- Has own padding -->
      <div class="metrics">
        <div class="metrics__container">
          <h5 class="metrics__heading">Avg. distance</h5>
          <p class="metrics__metric">{destination.distance}</p>
        </div>

        <div class="metrics__container">
          <h5 class="metrics__heading">Est. travel time</h5>
          <p class="metrics__metric">{destination.travel}</p>
        </div>
      </div>
    </div>
  </div>
</section>
