---
import type { ImageMetadata } from 'astro';
import { Picture } from 'astro:assets';
import HeaderDestination from './HeaderDestination.astro';
import { destinations } from '../data.json';
// import moon from '../assets/destination/image-moon.png';

const { destinationName } = Astro.props;
const [destination] = destinations.filter(
  (destination) => destination.name === destinationName
);
console.log(destination);

const images = import.meta.glob<{ default: ImageMetadata }>(
  '../assets/destination/*.{png,webp}'
);
console.log(images);
---

<style>
  .destination__heading {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    color: var(--white);
  }

  .destination-span {
    opacity: 0.25;
  }

  .destination__image-container {
    padding: 3rem 0 2.5rem;
  }

  .destination__image {
    margin: 0 auto;
    width: 17rem;
    height: 17rem;
    object-fit: cover;
  }

  .destination__data {
    padding: 0 2.4rem;
  }
</style>

<section class="destination">
  <h5 class="destination__heading">
    <span class="destination-span">01</span>Pick your destination
  </h5>

  <!-- TODO: images .png .webp in .destination__image -->
  <div class="destination__info">
    <div class="destination__image-container">
      <!-- <img src={moon.src} alt={destination.name} /> -->
      <Picture
        src={images[destination.images.png]()}
        formats={['webp', 'png']}
        alt={destination.name}
        class="destination__image"
      />
    </div>

    <div class="destination__data">
      <HeaderDestination />

      <p class="destination__text">{destination.description}</p>

      <!-- Rename same class numbers -->
      <div class="destination__metrics">
        <div class="destination__distance">
          <h4 class="destination__distance-heading">Avg. distance</h4>
          <p class="destination__distance-number">{destination.distance}</p>
        </div>

        <div class="destination__travel">
          <h4 class="destination__travel-heading">Est. travel time</h4>
          <p class="destination__travel-number">{destination.travel}</p>
        </div>
      </div>
    </div>
  </div>
</section>
